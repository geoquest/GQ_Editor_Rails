
<script language="javascript">
  var project_id = "<%= params[:project_id] %>";
  var mission_id = "<%= @mission.attributes['id'] %>";
</script>

<%= render 'shared/header' %>

<%= render 'shared/mission_navigation' %>
<%= render 'shared/editor_control' %>


<%= javascript_include_tag "jquery/jquery.ui"  %>
<%= javascript_include_tag "jquery/jquery.fileTree"  %>
<%= javascript_include_tag "jquery/jquery.contextMenu"  %>
<%= javascript_include_tag "http://maps.google.com/maps/api/js?sensor=false" %>
<%= javascript_include_tag "commands/command" %>
<%= javascript_include_tag "commands/hotspots" %>
<%= javascript_include_tag "commands/missions" %>
<%= javascript_include_tag "shared/image_select" %>
<%= javascript_include_tag "views/map_overview"  %>

<%= stylesheet_link_tag 'jquery.ui'  %>
<%= stylesheet_link_tag 'jqueryFileTree'  %>
<%= stylesheet_link_tag 'jquery.contextMenu'  %>



<ul id="mapMenu" class="contextMenu">
  <li>
    <a href="#newHotspot">New Hotspot</a>
  </li>
</ul>



<ul id="hotspotMenu" class="contextMenu">
  <li>
    <a href="#deleteHotspot">Delete Hotspot</a>
  </li>
  <li>
    <a href="#changeImage">Change Image</a>
  </li>
  <li>
    <a href="#setRadius">Set Radius</a>
  </li>
</ul>


<div class="content">
  <div id="map_canvas" style="width:400pt; height:300pt"></div>
  <br />
  <input type="button" value="Add Hotspot" onclick="createNewHotspot()" />
  <input type="button" value="Delete Hotspot" onclick="deleteHotspot()" />
  <br />

</div>


<script language="javascript">
function addHotspotMarker() {

  <% @hotspots.each do |hotspot| %>
  addMarker(<%= hotspot.attributes["latitude"] %>, <%= hotspot.attributes["longitude"] %> , "<%= hotspot.attributes["id"] %>", <%= hotspot.attributes["radius"] %>,  "<%= REXML::XPath.first(hotspot, './img').attributes["src"] %>" );
  <% end  %>
}

</script>




